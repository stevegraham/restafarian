"use strict";

var Resource = {};

Resource.label = "<%= object_name %>";

Resource.persisted = <%= object.persisted? %>;

Resource.properties = <%= JSON.pretty_generate(object_typed_properties, indent: '  ') %>;

Resource.validators = {
  "presence": function(property, options) {
    var message = options.message || "must not be blank";
    if(!this[property]) return message;
  },

  "length": function(property, options) {},

  "acceptance": function(property, options) {},

  "inclusion": function(property, options) {},

  "confirmation": function(property, options) {},

  "numericality": function(property, options) {}
}

Resource.validate = function(representation) {
  var errors = {};

  for(var property in this.properties) {
    errors[property] = [];

    for(var validator in this.properties[property].validators) {
      var options = this.properties[property].validators[validator];
      var error = this.validators[validator].call(representation, property, options);
      if(error) errors[property].push(error);
    }
  }

  return errors;
}
