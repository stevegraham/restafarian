"use strict";

var Resource = {};

Resource.label = "<%= object_name %>";

Resource.persisted = <%= object.persisted? %>;

Resource.properties = <%= JSON.pretty_generate(object_typed_properties, indent: '  ') %>;

Resource.errors = <%= JSON.pretty_generate(I18n.t('errors.messages'), indent: '  ') %>;

Resource.validators = {
  "presence": function(property, options) {
    if(!this[property]) return 'blank';
  },

  "absence": function(property, value) {
    if(this[property]) return 'present';
  },

  "length": function(property, options) {},

  "acceptance": function(property, options) {},

  "inclusion": function(property, options) {},

  "confirmation": function(property, options) {},

  "numericality": function(property, options) {}
}

Resource.validate = function(representation) {
  var errors = {};

  for(var property in this.properties) {
    errors[property] = [];

    for(var validator in this.properties[property].validators) {
      var options = this.properties[property].validators[validator];
      var error = this.validators[validator].call(representation, property, options);


      if(error) errors[property].push(options.message || this.errors[error]);
    }
  }

  return errors;
}
