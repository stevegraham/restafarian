(function() {
  "use strict";
  var validators = { <%= validators %>  };
  var fmt = function(message, params) {
    return message.replace(/%{(\w+)}/, function(match, capture) {
      return params[capture];
    });
  };
  var resource = {
    label: "<%= object_name %>",
    properties: <%= typed_properties %>,
    validate: function(representation) {
      var errors = {};

      for(var property in this.properties) {
        errors[property] = [];

        for(var validator in this.properties[property].validators) {
          if(!validators[validator]) continue;

          var options = this.properties[property].validators[validator];
          var error   = validators[validator].call(representation, property, options);

          if(error) errors[property].push(error);
        }
      }

      return errors;
    }
  };
  return resource;
})();
